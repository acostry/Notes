# Notes

除了一些常规的运维服务支持，定价等问题外（其实我不是很熟悉这块），结合我的一些经验，可以在如下问题上深入讨论一些（主要是从运维的角度，从开发的角度可能会有不一样的情况）：

---

## 关注点 - 运维

> 注：从运维角度讲，最关注的是 如何做到不宕机？ 如何平滑升级？如何轻易灾难恢复？如何监控？如何稳定定位及迅速恢复服务？所以在讨论以下问题的时候，需要时刻都想着这些关键问题，因为这些问题可能涉及到方方面面。

- 升级  
包括 host(硬件)，VSI（虚拟机实例）以及openstack本身的 升级和打补丁等  
关注点：easystack在这方面的是否可以不中断服务升级？如何操作？

- 备份与恢复    
a: 在关键设备上（例如，存储设备-持久化卷/存储）如何实现常规备份和灾难恢复？或者如何保证各种意外情况下，数据不丢失。  
b: 如何做到在VSI 在意外宕机的情况下，迁移VSI内容到其他实例，以及 保证挂载的持久化卷不丢失？

- 扩容  
a: 整个环境的扩容  
b: 相关计算节点或者实例的扩容（host, VSI 等）

- 存储  
a. 对象存储  -- 主要用来存储非结构化数据  
b. 块存储 -- 主要用于VSI挂载，持久化数据

- 网络及安全   
a 如果我们对外提供服务，需要接入外网，要弄清楚其如何保证网络安全（比如DDos攻击等）  
b 网络,网络隔离及IP管理  
c 带宽  

- 关键设备的监控（VSI，网络设备（路由，防火墙，DNS等），存储设备）  
包括：常规的指标监控(CPU, memory，磁盘等) 以及性能监控（存储设备的读写性能等）

- 日志存储和查询

- 认证和授权

- 迁移
包括 数据迁移，VSI 迁移等

- HA  

- 部署
需要了解详细的部署流程，是否足够自动化，是否可以快速上手 


---

## 常见问题

在我们的运维中，常见的IaaS层错误主要有以下几种：（可以试着从这几个问题出发，发散讨论）

1. VSI 无响应，无法正常SSH 连接。（很多情况下是由于CPU被过多占用引起）  
解决方法：通过openstack提供的UI，进行 硬重启。原因很多是因为某个进程过多占用CPU 引起的  
讨论点：如何能更好的监控这种情况，是否可以提前预警？

2. 存储设备（主要是对象存储）读写性能降低，或者无法连接。  
解决方法：这种通常是存储设备的问题，需要iaas层运维介入  
讨论点：对于此种情况，如何做到更好的监控和快速定位问题。

3. 升级或者迁移照成服务意外中断  
讨论点：如何最大程度降低因为常规升级照成的中断

4. 网络问题（丢包，或者网络中断）  
讨论点：对于网络问题最大的问题是 如何利用各种功能以及方法快速定位是哪段网络出的问题，或者是哪个设备照成的网络问题。



